{% load static %}
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="">
    <meta name="author" content="">

    <title>Private Health Services Network</title>

    <!-- CSS FILES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;0,700;1,400&display=swap"
        rel="stylesheet">

    <link href="{% static 'css/bootstrap.min.css'%}" rel="stylesheet">

    <link href="{% static 'css/bootstrap-icons.css'%}" rel="stylesheet">

    <link href="{% static 'css/tooplate-clean-work.css'%}" rel="stylesheet">


    <style>
        .chart-container {
            width: 90%;
            max-width: 900px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        canvas {
            height: 400px !important;
        }


        /* for patients entries  */
        .GaugeMeter {
            Position: Relative;
            Text-Align: Center;
            Overflow: Hidden;
            Cursor: Default;
        }

        .GaugeMeter SPAN,
        .GaugeMeter B {
            Margin: 0 23%;
            Width: 54%;
            Position: Absolute;
            Text-Align: Center;
            Display: Inline-Block;
            Color: RGBa(0, 0, 0, .8);
            Font-Weight: 100;
            Font-Family: "Open Sans", Arial;
            Overflow: Hidden;
            White-Space: NoWrap;
            Text-Overflow: Ellipsis;
        }

        .GaugeMeter[data-style="Semi"] B {
            Margin: 0 10%;
            Width: 80%;
        }

        .GaugeMeter S,
        .GaugeMeter U {
            Text-Decoration: None;
            Font-Size: .60em;
            Font-Weight: 200;
            Opacity: .6;
        }

        .GaugeMeter B {
            Color: Black;
            Font-Weight: 200;
            Font-Size: 0.85em;
            Opacity: .8;
        }


        DIV.GaugeMeter {
            Float: Left;
        }


        HEADER .Preview .GaugeMeter {
            Margin: 0 10px;
        }
    </style>
</head>

<body>

    <header class="site-header white-color py-2">
        <div class="container-fluid">
            <div class="row align-items-center justify-content-between">

                <!-- Left Side -->
                <div class="col-md-9 col-8 d-flex flex-wrap align-items-center">
                    <p class="d-flex me-4 mb-0 text-white">
                        <i class="bi-house-fill me-2"></i>
                        Private Health Services Network
                    </p>

                    <p class="d-flex d-lg-block d-md-block d-none me-4 mb-0 text-white">
                        <i class="bi-clock-fill me-2"></i>
                        <strong class="me-2">Mon - Fri</strong> 8:00 AM - 5:30 PM
                    </p>
                </div>

                <!-- Right Side (Logout Button) -->
                <div class="col-md-3 col-4 d-flex justify-content-end">
                    <a style="background-color: #79a5e6; border: none; color: white; border-radius: 50px; "
                        href="{% url 'logout' %}" class="btn btn-light btn-sm">
                        <i class="bi-box-arrow-right me-1"></i> Logout
                    </a>
                </div>

            </div>
        </div>
    </header>


    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="{% static 'ambulance.png' %}" class="logo img-fluid" alt="">

                <span class="ms-2"> Private Health Services Network</span>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link  active" href="{% url 'admin_home_page' %}" id="navbarLightDropdownMenuLink"
                            role="button" aria-expanded="false">Home</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'about' %}">About Us</a>
                    </li>


                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'contact' %}">Contact</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'services' %}" id="navbarLightDropdownMenuLink" role="button"
                            aria-expanded="false">Our Services</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'profile_image' %}" id="navbarLightDropdownMenuLink"
                            role="button" aria-expanded="false">Profile</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main>

        <section class="hero-section hero-section-full-height d-flex justify-content-center align-items-center">
            <div class="section-overlay"></div>

            <div class="container">
                <div class="row">

                    <div class="col-lg-7 col-12 text-center mx-auto">
                        <h1 class="cd-headline rotate-1 text-white mb-4 pb-2">
                            <span>Our Services Through</span>
                            <span class="cd-words-wrapper">
                                <b class="is-visible">Private Ambulance</b>
                                <b>Private Hospital</b>
                            </span>
                        </h1>
                    </div>

                </div>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                <path fill="#ffffff" fill-opacity="1"
                    d="M0,224L40,229.3C80,235,160,245,240,250.7C320,256,400,256,480,240C560,224,640,192,720,176C800,160,880,160,960,138.7C1040,117,1120,75,1200,80C1280,85,1360,139,1400,165.3L1440,192L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z">
                </path>
            </svg>

        </section>
        <section class="intro-section" id="intro-section">
            <div class="container">
                <div class="row justify-content-lg-center align-items-center">

                    <div class="col-lg-6 col-12">
                        <h2 class="mb-4">Welcome to &amp; Private Health Services <br> Network</h2>

                        <p>Instantly request an ambulance during emergencies. Patients can call nearby drivers in
                            real-time, while drivers can log in to update their availability and respond faster—just
                            like ride-hailing apps</p>
                        <p>Whether it’s an accident or a medical emergency, find the nearest available ambulance within
                            seconds. Our platform connects patients with nearby drivers quickly and reliably, ensuring
                            help is never far away.</p>
                    </div>

                    <div class="col-lg-6 col-12 custom-block-wrap">
                        <img src="{% static 'images/intro_image.png' %}" class="img-fluid">

                        <div class="custom-block d-flex flex-column">
                            <h6 class="text-white mb-3">Need Help? <br> Please call us:</h6>

                            <p class="d-flex mb-0">
                                <i class="bi-telephone-fill custom-icon me-2"></i>

                                <a href="tel: 123456789">
                                    123456789
                                </a>
                            </p>
                        </div>
                    </div>

                </div>
            </div>
        </section>
        <section class="services-section section-padding section-bg" id="services-section">
            <div class="container">
                <div class="row">

                    <div class="col-lg-12 col-12">
                        <h2 class="mb-4">Analysis</h2>
                    </div>
                    {% for adm in admin_page_data %}
                    <div class="col-lg-6 col-12">
                        <div class="services-thumb">
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-12">
                                    <div class="services-image-wrap">
                                        <a href="#">
                                            {% if adm.image %}
                                            <img src="{{ adm.image.url }}" class="services-image img-fluid" alt="">
                                            {% else %}
                                            <img src="{% static 'admin.png' %}" class="services-image img-fluid" alt="">
                                            {% endif %}
                                        </a>
                                    </div>
                                </div>

                                <div class="col-lg-7 col-md-7 col-12 d-flex align-items-center">
                                    <div class="services-info mt-4 mt-lg-0 mt-md-0">
                                        <h3 class="services-title mb-1 mb-lg-2">
                                            <a class="services-title-link" href="#">{{Adm.username}}</a>
                                        </h3>

                                        <h5>Reyansh Shaurya</h5>

                                        <div class="d-flex flex-wrap align-items-center">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>


            <!-- for driver access -->
            <h3 class="text-center mb-4">All Registered Ambulance Drivers</h3>

            <table class="table table-bordered table-hover table-striped bg-white">
                <thead class="thead-dark">
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Location</th>
                        <th>Status</th>
                        <th>Profile Image</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for driver in all_drivers %}
                    <tr>
                        <td>{{ driver.username }}</td>
                        <td>{{ driver.email }}</td>
                        <td>{{ driver.location }}</td>
                        <td>
                            {% if driver.is_active %}
                            <span class="badge badge-success">Active</span>
                            {% else %}
                            <span class="badge badge-secondary">Inactive</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if driver.image %}
                            <img src="{{ driver.image.url }}" alt="Driver Image" width="60" height="60"
                                style="border-radius: 50%;">
                            {% else %}
                            <img src="{% static 'profile_images/ambulance_driver.png' %}" alt="Default Image" width="60"
                                height="60">
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'toggle_driver_status' driver.id %}"
                                class="btn btn-sm {% if driver.is_active %}btn-warning{% else %}btn-success{% endif %}">
                                {% if driver.is_active %}Disable{% else %}Activate{% endif %}
                            </a>
                            {% comment %}<a href="{% url 'edit_driver' driver.id %}" class="btn btn-sm btn-primary">Edit</a>{% endcomment %}
                            <a href="{% url 'delete_driver' driver.id %}" class="btn btn-sm btn-danger"
                                onclick="return confirm('Are you sure?')">Delete</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </section>


        <div class="container my-5">
            <div class="d-flex flex-column align-items-center">

                <h3 class="mb-3">User Register</h3>
                <div class="GaugeMeter mb-5" id="GaugeMeterPatient" data-percent="{{ patient_register }}"
                    data-size="370" data-width="25" data-color="#007BFF" data-back="RGBA(0,0,0,0.1)"
                    data-animate_gauge_colors="true" data-animate_text_colors="true" data-label="Register User"
                    data-label_color="black" data-stripe="2" style="font-size: 22px;">
                </div>

                <h3 class="mb-3">Driver Register</h3>
                <div class="GaugeMeter" id="GaugeMeterDriver" data-percent="{{ driver_register }}" data-size="370"
                    data-width="25" data-color="#28A745" data-back="RGBA(0,0,0,0.1)" data-animate_gauge_colors="true"
                    data-animate_text_colors="true" data-label="Register Driver" data-label_color="black"
                    data-stripe="2" style="font-size: 22px;">
                </div>

            </div>
        </div>





        <h2 style="text-align: center;">Yearly Health Service Overview</h2>

        <div class="chart-container">
            <canvas id="combinedChart"></canvas>
        </div>



    </main>


    <footer class="site-footer">
        <div class="container">
            <div class="row">

                <div class="col-lg-12 col-12 d-flex align-items-center mb-4 pb-2">
                    <div>
                        <img src="{% static 'ambulance.png' %}" class="logo img-fluid" alt="">
                    </div>

                    <ul class="footer-menu d-flex flex-wrap ms-5">
                        <li class="footer-menu-item"><a href="{% url 'about' %}" class="footer-menu-link">About Us</a>
                        </li>

                        <li class="footer-menu-item"><a href="#" class="footer-menu-link">Contact</a></li>
                    </ul>
                </div>

                <div class="col-lg-5 col-12 mb-4 mb-lg-0">
                    <h5 class="site-footer-title mb-3">Our Services</h5>

                    </ul>
                </div>

                <div class="col-lg-4 col-md-6 col-12 mb-4 mb-lg-0 mb-md-0">

                    <p class="text-white d-flex mb-2">
                        <i class="bi-telephone-fill me-2"></i>

                        <a href="tel: 110-220-9800" class="site-footer-link">
                            123456789
                        </a>
                    </p>

                    <p class="text-white d-flex">
                        <i class="bi-envelope-fill me-2"></i>

                        <a href="mailto:info@company.com" class="site-footer-link">
                            gmail@company.com
                        </a>
                    </p>

                    <ul class="social-icon mt-4">
                        <li class="social-icon-item">
                            <a href="#" class="social-icon-link button button--skoll">
                                <span></span>
                                <span class="bi-twitter"></span>
                            </a>
                        </li>

                        <li class="social-icon-item">
                            <a href="#" class="social-icon-link button button--skoll">
                                <span></span>
                                <span class="bi-facebook"></span>
                            </a>
                        </li>

                        <li class="social-icon-item">
                            <a href="#" class="social-icon-link button button--skoll">
                                <span></span>
                                <span class="bi-instagram"></span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-6 col-6 mt-3 mt-lg-0 mt-md-0">
                    <div class="featured-block">
                        <h5 class="text-white mb-3">Health Care Services</h5>

                        <strong class="d-block text-white mb-1">Mon - Fri</strong>

                        <p class="text-white mb-3">8:00 AM - 5:30 PM</p>

                        <strong class="d-block text-white mb-1">Sat</strong>

                        <p class="text-white mb-0">6:00 AM - 2:30 PM</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="site-footer-bottom">
            <div class="container">
                <div class="row">

                    <div class="col-lg-6 col-12">
                        <p class="copyright-text mb-0">Copyright © 2025 Health services</p>
                    </div>

                    <div class="col-lg-6 col-12 text-end">
                        <p class="copyright-text mb-0">
                            Designed by xyz</p>
                    </div>

                </div>
            </div>
        </div>
    </footer>



    <!-- JAVASCRIPT FILES -->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/jquery.backstretch.min.js' %}"></script>
    <script src="{% static 'js/counter.js' %}"></script>
    <script src="{% static 'js/countdown.js' %}"></script>
    <script src="{% static 'js/init.js' %}"></script>
    <script src="{% static 'js/modernizr.js' %}"></script>
    <script src="{% static 'js/animated-headline.js' %}"></script>
    <script src="{% static 'js/custom.js' %}"></script>



    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    <script src="{% static 'GaugeMeter.js' %}"></script>

    <script>
        const months = {{ months| safe }};
        const patientEntries = {{ patient_entries| safe }};
        const ambulanceEntries = {{ ambulance_entries| safe }};
        const discharged = {{ discharged_patients| safe }};
        const deaths = {{ patient_deaths| safe }};

        const ctx = document.getElementById('combinedChart').getContext('2d');

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: months,
                datasets: [
                    {
                        label: 'Patients Entered',
                        data: patientEntries,
                        backgroundColor: '#ccd5ae'
                    },
                    {
                        label: 'Ambulances',
                        data: ambulanceEntries,
                        backgroundColor: '#94d2bd'
                    },
                    {
                        label: 'Discharged Patients',
                        data: discharged,
                        backgroundColor: '#48cae4'
                    },
                    {
                        label: 'Deaths',
                        data: deaths,
                        backgroundColor: '#003566'
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 10
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Monthly Report (2024)'
                    }
                }
            }
        });
        $('.hero-section').backstretch([
            "{% static 'images/services/ambulance1.png' %}",
            "{% static 'images/services/ambulance4.png' %}",
            "{% static 'images/services/ambulance2.png' %}"
        ], { duration: 2000, fade: 750 });







        // for patient entries 
        $(document).ready(function () {
            //GaugeMeter
            $(".GaugeMeter").gaugeMeter();
            $("#GaugeMeter_103").gaugeMeter({ percent: 35 });

            //Format Code
            $("pre.Code").html(function (index, html) {
                return html.replace(/^(.*)$/mg, "<span class='Line'>$1</span>");
            });

            //Sticky Table Header
            var tables = $("table.StickyHeader");
            tables.each(function (i) {
                var table = tables[i];
                var theadClone = $(table).find("thead").clone(true);
                var stickyHeader = $("<div></div>").addClass("StickyHeader Hide");
                stickyHeader.append($("<table></table")).find("table").append(theadClone);
                $(table).after(stickyHeader);

                var tableHeight = $(table).height();
                var tableWidth = $(table).width() + Number($(table).css("padding-left").replace(/px/ig, "")) + Number($(table).css("padding-right").replace(/px/ig, "")) + Number($(table).css("border-left-width").replace(/px/ig, "")) + Number($(table).css("border-right-width").replace(/px/ig, ""));

                var headerCells = $(table).find("thead th");
                var headerCellHeight = $(headerCells[0]).height();

                var no_fixed_support = false;
                if (stickyHeader.css("position") === "Absolute") {
                    no_fixed_support = true;
                }

                var stickyHeaderCells = stickyHeader.find("th");
                stickyHeader.css("width", "100%");
                var cellWidth = $(headerCells[0]).width() + 1;
                $(stickyHeaderCells[0]).attr("style", "width:" + cellWidth + "px !important");

                var cutoffTop = $(table).offset().top;
                var cutoffBottom = tableHeight + cutoffTop - headerCellHeight;

                $(window).scroll(function () {
                    var currentPosition = $(window).scrollTop();
                    if (currentPosition > cutoffTop && currentPosition < cutoffBottom) {
                        stickyHeader.removeClass("Hide");
                        if (no_fixed_support) {
                            stickyHeader.css("top", currentPosition + "px");
                        }
                    } else {
                        stickyHeader.addClass("Hide");
                    }
                });
            });
        });

    </script>








</body>

</html>